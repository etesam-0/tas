<!DOCTYPE html><html lang="fa"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>🎲 تاس سه‌بعدی</title><style>body{margin:0;padding:0;font-family:"Segoe UI",sans-serif;background:#0f2027;display:flex;justify-content:center;align-items:center;height:100vh;overflow:hidden;color:white;}#mainScene,#colorScene{position:absolute;width:100%;height:100%;display:flex;flex-direction:column;justify-content:center;align-items:center;}#colorScene{display:none;}#scene{width:250px;height:250px;perspective:800px;margin-bottom:20px;}#cube{width:200px;height:200px;position:relative;transform-style:preserve-3d;margin:auto;}.face{position:absolute;width:200px;height:200px;background:#fff;border:2px solid #000;}.dot{width:30px;height:30px;border-radius:50%;background:#000;position:absolute;}#controls{position:absolute;bottom:20px;display:flex;gap:10px;}button{padding:10px 20px;border:none;border-radius:8px;background:#0072ff;color:white;font-size:1rem;cursor:pointer;transition:0.3s;}button:hover{background:#00c6ff;transform:scale(1.05);}input[type=color]{width:60px;height:40px;border:none;margin:10px;cursor:pointer;}.color-options{display:flex;flex-direction:column;gap:15px;align-items:center;margin:20px;}.glow{box-shadow:0 0 25px #00c6ff,0 0 50px #00c6ff inset;}</style></head><body><div id="mainScene"><div id="scene"><div id="cube"></div></div><div id="controls"><button id="roll">🎲 پرتاب کن</button><button id="colorBtn">🎨 انتخاب رنگ</button></div></div><div id="colorScene"><h2>🎨 تنظیمات تاس</h2><div class="color-options"><label>رنگ بدنه: <input type="color" id="bodyColor" value="#ffffff"></label><label>رنگ نقطه‌ها: <input type="color" id="dotColor" value="#000000"></label><label><input type="checkbox" id="glowToggle"> ✨ Glow فعال باشد</label></div><div style="display:flex;gap:10px;"><button id="applyColors">✔️ اعمال</button><button id="backBtn">🔙 بازگشت به بازی</button></div></div><script>const cube=document.getElementById("cube");let bodyColor="#ffffff",dotColor="#000000",glow=false;const dotPatterns={1:[[100,100]],2:[[60,60],[140,140]],3:[[60,60],[100,100],[140,140]],4:[[60,60],[60,140],[140,60],[140,140]],5:[[60,60],[60,140],[100,100],[140,60],[140,140]],6:[[60,60],[60,100],[60,140],[140,60],[140,100],[140,140]]};function createDots(n){return dotPatterns[n].map(([x,y])=>{const d=document.createElement("div");d.className="dot";d.style.left=(x-15)+"px";d.style.top=(y-15)+"px";d.style.background=dotColor;return d;});}function buildCube(){cube.innerHTML="";const faces=[{n:1,transform:"rotateY(0deg) translateZ(100px)"},{n:6,transform:"rotateY(180deg) translateZ(100px)"},{n:3,transform:"rotateY(90deg) translateZ(100px)"},{n:4,transform:"rotateY(-90deg) translateZ(100px)"},{n:5,transform:"rotateX(90deg) translateZ(100px)"},{n:2,transform:"rotateX(-90deg) translateZ(100px)"}];faces.forEach(f=>{const face=document.createElement("div");face.className="face";face.style.background=bodyColor;if(glow)face.classList.add("glow");else face.classList.remove("glow");face.style.transform=f.transform;createDots(f.n).forEach(dot=>face.appendChild(dot));cube.appendChild(face);});}buildCube();const facesRot=[{x:0,y:0},{x:-90,y:0},{x:0,y:-90},{x:0,y:90},{x:90,y:0},{x:0,y:180}];let currentX=0,currentY=0,isDragging=false,startX=0,startY=0;document.getElementById("roll").onclick=()=>{let random=Math.floor(Math.random()*6);let{x,y}=facesRot[random];let spinX=x+360*(2+Math.floor(Math.random()*2));let spinY=y+360*(2+Math.floor(Math.random()*2));currentX=spinX;currentY=spinY;cube.style.transition="transform 2s cubic-bezier(.25,1.7,.35,1)";cube.style.transform=`rotateX(${currentX}deg) rotateY(${currentY}deg)`;};const scene=document.getElementById("scene");scene.addEventListener("touchstart",e=>{isDragging=true;startX=e.touches[0].clientX;startY=e.touches[0].clientY;cube.style.transition="none";});scene.addEventListener("touchmove",e=>{if(!isDragging)return;let dx=e.touches[0].clientX-startX;let dy=e.touches[0].clientY-startY;let sensitivity=0.4;let newX=currentX-dy*sensitivity;let newY=currentY+dx*sensitivity;cube.style.transform=`rotateX(${newX}deg) rotateY(${newY}deg)`;});scene.addEventListener("touchend",e=>{if(!isDragging)return;let dx=e.changedTouches[0].clientX-startX;let dy=e.changedTouches[0].clientY-startY;let sensitivity=0.4;currentX=currentX-dy*sensitivity;currentY=currentY+dx*sensitivity;isDragging=false;});document.getElementById("colorBtn").onclick=()=>{document.getElementById("mainScene").style.display="none";document.getElementById("colorScene").style.display="flex";};document.getElementById("applyColors").onclick=()=>{bodyColor=document.getElementById("bodyColor").value;dotColor=document.getElementById("dotColor").value;glow=document.getElementById("glowToggle").checked;buildCube();document.getElementById("mainScene").style.display="flex";document.getElementById("colorScene").style.display="none";};document.getElementById("backBtn").onclick=()=>{document.getElementById("mainScene").style.display="flex";document.getElementById("colorScene").style.display="none";};</script></body></html>
